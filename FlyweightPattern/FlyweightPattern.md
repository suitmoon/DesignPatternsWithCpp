# 享元模式
享元模式（Flyweight Pattern）是一种结构型设计模式，它通过**共享对象**来减少内存使用和提高性能。
享元模式的核心思想是：**将对象的共享部分（内部状态）与不可共享部分（外部状态）分离**，从而减少对象的数量，节省内存。

对象的**内部状态**和**外部状态**分离：
1. **内部状态**：   
    - 对象的固有属性，可以被多个对象共享。
    - 例如，字符的字体家族等。 
2. **外部状态**：
    - 对象的上下文相关属性，不能被共享。
    - 例如，字符在文本中的位置。

### 享元模式的结构
享元模式通常包含以下几个角色：
1. **Flyweight（享元接口）**：
    - 定义享元对象的接口，通常是一个 `operation` 方法。
2. **ConcreteFlyweight（具体享元）**：
    - 实现享元接口，表示可以共享的享元对象。
    - 具体享元对象通常包含内部状态（即可以共享的部分）。
3. **UnsharedConcreteFlyweight（非共享具体享元）**/**外部状态（Extrinsic State）**：
    - 实现享元接口，表示不可共享的享元对象。
    - 非共享具体享元对象通常包含外部状态（即不可共享的部分）。
4. **FlyweightFactory（享元工厂）**：
    - 负责创建和管理享元对象，确保享元对象被正确共享。



### 享元模式的优点
1. **减少内存使用**：
    - 享元模式通过共享对象来减少内存使用，特别是在需要大量相似对象时，可以显著节省内存。       
2. **提高性能**：   
    - 享元模式通过减少对象的数量，可以提高系统的性能。


### 享元模式的应用场景
1. **大量相似对象**：
    - 当系统中存在大量相似对象时，可以使用享元模式来减少内存使用。
2. **对象的大部分状态可以外部化**：
    - 当对象的大部分状态可以外部化时，可以使用享元模式来共享对象的内部状态。  
3. **需要缓存对象**：
    - 当需要缓存对象以提高性能时，可以使用享元模式。

